(window.webpackJsonpdead=window.webpackJsonpdead||[]).push([[0],{37:function(e){e.exports=JSON.parse('{"a":"1.1.0"}')},40:function(e,t,r){e.exports=r(80)},54:function(e,t,r){},55:function(e,t,r){},56:function(e,t,r){},57:function(e,t,r){},58:function(e,t,r){},59:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},79:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"rangeContainsTag",function(){return F}),r.d(n,"groupContainsTag",function(){return I}),r.d(n,"groupForTag",function(){return G}),r.d(n,"tagStrToObj",function(){return W}),r.d(n,"tagObjToStr",function(){return $});var a={};r.r(a),r.d(a,"authorize",function(){return dt}),r.d(a,"deauthorize",function(){return lt}),r.d(a,"loadList",function(){return bt}),r.d(a,"reloadOneCard",function(){return mt}),r.d(a,"putCard",function(){return gt}),r.d(a,"addLabelToCard",function(){return vt});var c={};r.r(c),r.d(c,"saveTreatment",function(){return kt}),r.d(c,"fetch",function(){return Rt}),r.d(c,"fetchConfig",function(){return St});var o={};r.r(o),r.d(o,"fetch",function(){return zt}),r.d(o,"computeStats",function(){return Bt});var u={};r.r(u),r.d(u,"fetch",function(){return Xt}),r.d(u,"saveDead",function(){return tr});var i={};r.r(i),r.d(i,"resized",function(){return ir}),r.d(i,"init",function(){return sr});var s={};r.r(s),r.d(s,"updateMsg",function(){return rn}),r.d(s,"historySelectionChangeRequested",function(){return nn}),r.d(s,"historyGroupSortClicked",function(){return an}),r.d(s,"changeRecord",function(){return cn}),r.d(s,"logout",function(){return on}),r.d(s,"saveRecord",function(){return un}),r.d(s,"init",function(){return sn});var d=r(3),l=r.n(d),f=r(34),b=r.n(f),m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var v=r(14),p=r(23),O=r(16),j=r(15),h=r(17),y=r(0),E=r(8),w=r(2),N=r(7),k=r.n(N);r(54);function C(){var e=Object(y.a)(["changeRecord"]);return C=function(){return e},e}function R(){var e=Object(y.a)(["msg"]);return R=function(){return e},e}function S(){var e=Object(y.a)(["treatments.colors"]);return S=function(){return e},e}function D(){var e=Object(y.a)(["record"]);return D=function(){return e},e}var T=Object(E.connect)({record:Object(w.state)(D()),colors:Object(w.state)(S()),msg:Object(w.state)(R()),changeRecord:Object(w.sequences)(C())},function(e){var t=e.colors[e.record.tag.color];return l.a.createElement("div",{className:"tagbar",style:{borderColor:e.record.is_saved?"#CCCCCC":"red"}},l.a.createElement("input",{className:"colortext",style:{color:t,borderColor:t},value:e.record.tag.color,type:"text",onChange:function(t){t.preventDefault(),e.changeRecord({tag:{color:t.target.value}})}}),l.a.createElement("input",{className:"numbertext",value:e.record.tag.number||"",type:"text",onChange:function(t){t.preventDefault(),e.changeRecord({tag:{number:+t.target.value}})}}))});r(55);function L(){var e=Object(y.a)(["msg"]);return L=function(){return e},e}var Y=Object(E.connect)({msg:Object(w.state)(L())},function(e){return l.a.createElement("div",{className:"msg msg"+e.msg.type},e.msg.text)}),q=r(11),x=r.n(q),A=r(5),z=r.n(A),B=r(20),M=r.n(B),F=function(e,t){return t.color===e.start.color&&t.number>=e.start.number&&t.number<=e.end.number},I=function(e,t){return z.a.find(e.tag_ranges,function(e){return F(e,t)})},G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&t.groupname)return z.a.find(e,function(e){return e.groupname===t.groupname});var n=z.a.filter(e,function(e){return I(e,t)});if(!n||n.length<1)return!1;r=r?M()(r,"YYYY-MM-DD"):M()();var a=z.a.filter(n,function(e){return!M()(e.date,"YYYY-MM-DD").isAfter(r)});if(!a)return console.log("WARNING: groupForTag: found multiple possible groups, but after filtering for date there were none left!"),!1;var c=z.a.sortBy(a,function(e){return e.date});return c[c.length-1]},W=function(e){var t=(e=e.trim()).match(/^([A-Z]+:[A-Z]{3}[0-9]{2}-[0-9A-Z]):([A-Za-z]+) *([0-9]+)$/);if(t)return{groupname:t[1],color:t[2],number:+(t[3]||1)};var r=e.match(/^([A-Za-z]+) ?([0-9]+)?$/);return r?{color:r[1],number:+r[2]||1}:{color:"NOTAG",number:1}},$=function(e){if(!e)return"";var t="";return e.groupname&&(t+=e.groupname+":"),t+=e.color||"",t+=e.number||""},P=r(21),Z=r.n(P);r(56);function H(){var e=Object(y.a)(["treatments.colors"]);return H=function(){return e},e}var V=Object(E.connect)({colors:Object(w.state)(H())},function(e){var t=e.record,r="black";t.tag&&t.tag.color&&e.colors[t.tag.color]&&(r=e.colors[t.tag.color]);var n=x()().diff(x()(t.group.date),"days"),a=(t.group.dead?t.group.dead.length:0)/+t.group.head*100,c="calfcardgoodgroup";return a>=10&&(c="calfcardmoderategroup"),a>=20&&(c="calfcardbadgroup"),l.a.createElement("div",{className:"calfcard"},l.a.createElement("div",{className:"calfcardheader"},l.a.createElement("span",{className:"calfcardcolortext",style:{fontWeight:"bold",color:r}},t.tag.color,t.tag.number,":\xa0"),t.treatments?t.treatments.length:"0"," treatments,\xa0",n," day",n>1||n<1?"s":""," onsite."),l.a.createElement("div",{className:"calfcardgroupinfo "+c},t.group.groupname,": \xa0",t.group.dead?t.group.dead.length:"0"," head (",Z()(a).format("0.00"),"%) dead"))});function _(){var e=Object(y.a)(["record"]);return _=function(){return e},e}function U(){var e=Object(y.a)(["treatments.records"]);return U=function(){return e},e}function J(){var e=Object(y.a)(["incoming.records"]);return J=function(){return e},e}function K(){var e=Object(y.a)(["dead.records"]);return K=function(){return e},e}function Q(){var e=Object(y.a)(["historySelector"]);return Q=function(){return e},e}var X=Object(E.connect)({historySelector:Object(w.state)(Q()),deadRecords:Object(w.state)(K()),incomingRecords:Object(w.state)(J()),treatmentRecords:Object(w.state)(U()),record:Object(w.state)(_())},function(e){var t=k.a.find(e.deadRecords,function(t){return t.date===e.record.date});t||(t=e.record);var r={},a=k.a.map(t.tags,function(a){var c=n.groupForTag(e.incomingRecords,a,t.date);return r[c.groupname]=k.a.cloneDeep(c),{tag:a,treatments:[],group:k.a.cloneDeep(c)}}),c=k.a.reduce(r,function(e,t){var r=x()(t.date,"YYYY-MM-DD");return r.isBefore(e)?r:e},x()()),o=k.a.filter(e.treatmentRecords,function(e){return x()(e.date).isAfter(c)});a=k.a.map(a,function(t){return t.treatments=k.a.filter(o,function(r){var a=k.a.find(r.tags,function(e){return e.number===t.tag.number&&e.color===t.tag.color});return!!a&&n.groupForTag(e.incomingRecords,a,r.date).groupname===t.group.groupname}),t});var u=k.a.sortBy(a,function(e){return e.group.date});return l.a.createElement("div",{className:"history"},l.a.createElement("div",{className:"historytitle"},t.date+": "+(t&&t.tags?t.tags.length:"0")," DEAD total."),k.a.map(u,function(e,t){return l.a.createElement(V,{key:"calfcard"+t,record:e})}))});function ee(){var e=Object(y.a)(["record"]);return ee=function(){return e},e}function te(){var e=Object(y.a)(["dead.tagIndex"]);return te=function(){return e},e}function re(){var e=Object(y.a)(["incoming.records"]);return re=function(){return e},e}function ne(){var e=Object(y.a)(["treatments.records"]);return ne=function(){return e},e}function ae(){var e=Object(y.a)(["historySelector"]);return ae=function(){return e},e}var ce=Object(E.connect)({historySelector:Object(w.state)(ae()),treatmentRecords:Object(w.state)(ne()),incomingRecords:Object(w.state)(re()),deadTagIndex:Object(w.state)(te()),record:Object(w.state)(ee())},function(e){var t=e.record;if(!t.tag||!t.tag.color||!t.tag.number)return"";var r=n.groupForTag(e.incomingRecords,t.tag,t.date),a=k.a.filter(e.treatmentRecords,function(a){return k.a.find(a.tags,function(c){if(c.number!==t.tag.number||c.color!==t.tag.color)return!1;var o=n.groupForTag(e.incomingRecords,c,a.date);return!(!o||!r||o.groupname!==r.groupname)})});a=k.a.reverse(k.a.sortBy(a,function(e){return e.date}));var c=-1,o=n.tagObjToStr(t.tag),u=!1;return t.group.groupname&&e.deadTagIndex[o]&&(u=e.deadTagIndex[o][t.group.groupname]),l.a.createElement("div",{className:"historytag"},l.a.createElement("div",{className:"historyheader"},a.length," Treatments",t.group?", "+t.group.groupname:""),u?l.a.createElement("div",{className:"historyerror"},"Already died on ",u,"!"):"",k.a.map(a,function(e,t){var r=x()().diff(x()(e.date,"YYYY-MM-DD"),"days"),n=r+" days ago";0===r&&(n="today"),1===r&&(n="yesterday");var a="(+"+(r-c)+")";return c<0&&(a=""),c=r,l.a.createElement("div",{className:"historytagentry",key:"historyline"+t},l.a.createElement("div",{className:"historytreatment"},e.treatment),l.a.createElement("div",{className:"historyduration"},n," ",a))}))});r(57);function oe(){var e=Object(y.a)(["historyGroupSortClicked"]);return oe=function(){return e},e}function ue(){var e=Object(y.a)(["historyGroup.sort"]);return ue=function(){return e},e}function ie(){var e=Object(y.a)(["record"]);return ie=function(){return e},e}function se(){var e=Object(y.a)(["treatments.records"]);return se=function(){return e},e}function de(){var e=Object(y.a)(["incoming.records"]);return de=function(){return e},e}function le(){var e=Object(y.a)(["historySelector"]);return le=function(){return e},e}var fe=Object(E.connect)({historySelector:Object(w.state)(le()),groups:Object(w.state)(de()),treatments:Object(w.state)(se()),record:Object(w.state)(ie()),sortBy:Object(w.state)(ue()),sortBySequence:Object(w.sequences)(oe())},function(e){var t=e.groups,r=G(e.groups,e.record.tag);return r&&(t=[r]),t=k.a.sortBy(t,function(t){return"date"===e.sortBy?t.day:"name"===e.sortBy?t.groupname:"dead"===e.sortBy?t.dead:"perc"===e.sortBy?(t.dead?t.dead.length:0)/(t.head?t.head:1):t.day}),t=k.a.reverse(t),l.a.createElement("div",{className:"historygroup"},r?" Showing group for current tag: "+e.record.tag.color+e.record.tag.number:"",l.a.createElement("table",{width:"100%"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{onClick:function(){return e.sortBySequence({sort:"name"})}},"Name"),l.a.createElement("th",{onClick:function(){return e.sortBySequence({sort:"date"})}},"Date"),l.a.createElement("th",{onClick:function(){return e.sortBySequence({sort:"dead"})}},"Dead"),l.a.createElement("th",{onClick:function(){return e.sortBySequence({sort:"perc"})}},"%")),k.a.map(t,function(e,t){var r=0;e.dead&&e.head&&(r=e.dead.length/e.head);var n=e.groupname;return n.length>15&&(n=n.slice(0,6)+"..."+n.slice(-6)),l.a.createElement("tr",{className:r<.05?"historygroupgood":r<.1?"historygroupmeh":"historygroupbad",key:"historygrouprow"+t},l.a.createElement("td",{className:"historygroupname"},l.a.createElement("span",{name:"historygroupnamepill"},n)),l.a.createElement("td",{className:"historygroupdate"}," ",x()(e.date,"YYYY-MM-DD").format("M/DD/YY")),l.a.createElement("td",{className:"historygroupdead"},e.dead?e.dead.length:0),l.a.createElement("td",{className:"historygroupperc"},r>0?"("+Z()(r).format("0.00%")+")":""))}))))}),be=r(36);function me(){var e=Object(y.a)(["record"]);return me=function(){return e},e}function ge(){var e=Object(y.a)(["dead.records"]);return ge=function(){return e},e}function ve(){var e=Object(y.a)(["historySelector"]);return ve=function(){return e},e}var pe=Object(be.extendMoment)(x.a),Oe=Object(E.connect)({historySelector:Object(w.state)(ve()),deadRecords:Object(w.state)(ge()),record:Object(w.state)(me())},function(e){var t=pe(),r=pe.range(t.clone().subtract(1,"months"),t),n=pe.range(t.clone().subtract(3,"months"),t),a=pe.range(t.clone().subtract(1,"years"),t),c=k.a.filter(e.deadRecords,function(e){return pe(e.date,"YYYY-MM-DD").within(r)}),o=k.a.filter(e.deadRecords,function(e){return pe(e.date,"YYYY-MM-DD").within(n)}),u=k.a.filter(e.deadRecords,function(e){return pe(e.date,"YYYY-MM-DD").within(a)}),i=k.a.reduce(c,function(e,t){return e+t.tags.length},0),s=k.a.reduce(o,function(e,t){return e+t.tags.length},0),d=k.a.reduce(u,function(e,t){return e+t.tags.length},0);return l.a.createElement("div",{className:"historydead"},l.a.createElement("div",{className:"historydeadentry"},"Past month: ",i," dead (",Z()(i/r.diff("days")).format("0.00"),"/day)"),l.a.createElement("div",{className:"historydeadentry"},"Past 3 months: ",s," dead (",Z()(s/n.diff("days")).format("0.00"),"/day)"),l.a.createElement("div",{className:"historydeadentry"},"Past year: ",d," dead (",Z()(d/a.diff("days")).format("0.00"),"/day)"))}),je=(r(58),r(37));function he(){var e=Object(y.a)(["logout"]);return he=function(){return e},e}var ye=Object(E.connect)({logout:Object(w.sequences)(he())},function(e){return l.a.createElement("div",{className:"prefs"},l.a.createElement("p",{className:"prefslink",href:"#",onClick:function(t){e.logout(),t.preventDefault()}},"Change Trello Account"),l.a.createElement("p",{className:"prefsinfo"},"Dead App Version ",je.a))});r(59);function Ee(){var e=Object(y.a)(["historySelector"]);return Ee=function(){return e},e}var we=Object(E.connect)({historySelector:Object(w.state)(Ee())},function(e){var t=l.a.createElement("div",{className:"history"},"Unknown History Type");switch(e.historySelector.active){case"date":t=l.a.createElement(X,null);break;case"tag":t=l.a.createElement(ce,null);break;case"group":t=l.a.createElement(fe,null);break;case"time":t=l.a.createElement(Oe,null);break;case"prefs":t=l.a.createElement(ye,null)}return t}),Ne=r(38),ke=r.n(Ne);r(61);function Ce(){var e=Object(y.a)(["historySelectionChangeRequested"]);return Ce=function(){return e},e}function Re(){var e=Object(y.a)(["historySelector"]);return Re=function(){return e},e}var Se=Object(E.connect)({historySelector:Object(w.state)(Re()),historySelectionChangeRequested:Object(w.sequences)(Ce())},function(e){return l.a.createElement("div",{className:"historyselector"},l.a.createElement("div",{className:"historyselectorbutton "+("prefs"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"prefs"})}},l.a.createElement(ke.a,{name:"bars"})),l.a.createElement("div",{className:"historyselectorbutton "+("date"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"date"})}},"Date"),l.a.createElement("div",{className:"historyselectorbutton "+("tag"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"tag"})}},"Tag"),l.a.createElement("div",{className:"historyselectorbutton "+("group"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"group"})}},"Group"),l.a.createElement("div",{className:"historyselectorbutton "+("time"===e.historySelector.active?"historyselectorbuttonactive":""),onClick:function(t){return e.historySelectionChangeRequested({active:"time"})}},"Time"))});r(62);function De(){var e=Object(y.a)(["dead.errors"]);return De=function(){return e},e}function Te(){var e=Object(y.a)(["windowSize"]);return Te=function(){return e},e}var Le=Object(E.connect)({windowSize:Object(w.state)(Te()),errors:Object(w.state)(De())},function(e){return l.a.createElement("div",{className:"tagpane",style:{maxHeight:"landscape"===e.windowSize.orientation?"98vh":"49vh"}},l.a.createElement(T,null),l.a.createElement(Y,null),!e.errors||e.errors.length<1?"":l.a.createElement("div",{className:"tagpane-errors"},k.a.map(e.errors,function(e){return l.a.createElement("div",{className:"tagpane-error"},"Error on card: ",e.cardName,l.a.createElement("br",null),"Error was: ",l.a.createElement("pre",null,e.error))})),l.a.createElement(Se,null),l.a.createElement(we,null))}),Ye=(r(63),Object(E.connect)({},function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"keypressed",value:function(e){8===e.keyCode&&(this.props.onBackspace(),e.preventDefault());var t=e.keyCode-48;t>=0&&t<=9&&(this.props.onNumber(t),e.preventDefault())}},{key:"componentDidMount",value:function(){document.addEventListener("keypress",this.keypressed.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.keypressed.bind(this))}},{key:"numberClicked",value:function(e){var t=this;return function(r){r.preventDefault(),t.props.onNumber(e)}}},{key:"clearClicked",value:function(e){e.preventDefault(),this.props.onClear()}},{key:"backspaceClicked",value:function(e){e.preventDefault(),this.props.onBackspace()}},{key:"renderCalcRow",value:function(e){var t=this;return l.a.createElement("div",{className:"keypadrow"},e.map(function(e){return l.a.createElement("div",{className:"keypadbutton",key:"calcwrap"+(k.a.isObject(e)?e.val:e),onClick:k.a.isObject(e)?e.clicked:t.numberClicked(e).bind(t)},k.a.isObject(e)?e.val:e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"keypad"},this.renderCalcRow([1,2,3]),this.renderCalcRow([4,5,6]),this.renderCalcRow([7,8,9]),this.renderCalcRow([{val:"C",clicked:this.clearClicked.bind(this)},0,{val:"<--",clicked:this.backspaceClicked.bind(this)}]))}}]),t}(l.a.Component)));r(64);function qe(){var e=Object(y.a)(["changeRecord"]);return qe=function(){return e},e}function xe(){var e=Object(y.a)(["treatments.colors"]);return xe=function(){return e},e}function Ae(){var e=Object(y.a)(["record"]);return Ae=function(){return e},e}var ze=Object(E.connect)({record:Object(w.state)(Ae()),colors:Object(w.state)(xe()),changeRecord:Object(w.sequences)(qe())},function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"keypressed",value:function(e){var t="";switch(e.key){case"y":t="YELLOW";break;case"g":t="GREEN";break;case"b":t="BLUE";break;case"r":t="RED";break;case"p":t="PURPLE";break;case"w":t="WHITE";break;case"n":t="NOTAG";break;default:return}e.preventDefault(),this.props.changeRecord({tag:{color:t}})}},{key:"componentDidMount",value:function(){document.addEventListener("keypress",this.keypressed.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.keypressed.bind(this))}},{key:"colorButtonClicked",value:function(e){var t=this.props;return function(r){r.preventDefault(),t.changeRecord({tag:{color:e}})}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"colorbar"},k.a.keys(this.props.colors).map(function(t,r){return l.a.createElement("div",{key:"color"+t,className:"colorbutton",onClick:e.colorButtonClicked(t),style:{backgroundColor:e.props.colors[t]}})}),l.a.createElement("div",{key:"colorNOTAG",className:"colorbutton",onClick:this.colorButtonClicked("NOTAG"),style:{backgroundColor:"#CCCCCC"}},"N"))}}]),t}(l.a.Component));r(65);function Be(){var e=Object(y.a)(["changeRecord"]);return Be=function(){return e},e}function Me(){var e=Object(y.a)(["record"]);return Me=function(){return e},e}var Fe=Object(E.connect)({record:Object(w.state)(Me()),changeRecord:Object(w.sequences)(Be())},function(e){return l.a.createElement("div",{className:"datebar"},l.a.createElement("input",{className:"dateinput",value:e.record.date,type:"date",onChange:function(t){t.preventDefault(),e.changeRecord({date:t.target.value})}}))});r(66);function Ie(){var e=Object(y.a)(["saveRecord"]);return Ie=function(){return e},e}function Ge(){var e=Object(y.a)(["changeRecord"]);return Ge=function(){return e},e}function We(){var e=Object(y.a)(["dead.tagIndex"]);return We=function(){return e},e}function $e(){var e=Object(y.a)(["recordsValid"]);return $e=function(){return e},e}function Pe(){var e=Object(y.a)(["treatments.treatmentCodes"]);return Pe=function(){return e},e}function Ze(){var e=Object(y.a)(["colors"]);return Ze=function(){return e},e}function He(){var e=Object(y.a)(["record"]);return He=function(){return e},e}var Ve=Object(E.connect)({record:Object(w.state)(He()),colors:Object(w.state)(Ze()),treatmentCodes:Object(w.state)(Pe()),recordsValid:Object(w.state)($e()),deadTagIndex:Object(w.state)(We()),changeRecord:Object(w.sequences)(Ge()),saveRecord:Object(w.sequences)(Ie())},function(e){var t=e.record,r=n.tagObjToStr(e.record.tag),a=t.group&&e.deadTagIndex&&e.deadTagIndex[r]&&e.deadTagIndex[r][t.group.groupname],c=function(){return e.recordsValid&&e.record.tag&&e.record.tag.number&&e.record.tag.color&&!a};return l.a.createElement("div",{className:"recordinput"},l.a.createElement(ze,null),l.a.createElement(Fe,null),l.a.createElement(Ye,{onNumber:function(t){var r=""+(e.record.tag.number||"");e.changeRecord({tag:{number:r+t}})},onClear:function(){e.changeRecord({tag:{number:"",color:""}})},onBackspace:function(){var t=""+e.record.tag.number;t.length>0&&(t=t.slice(0,-1)),e.changeRecord({tag:{number:+t}})}}),l.a.createElement("div",{className:"savebutton "+(c()?"savebuttonenabled":"savebuttondisabled"),onClick:function(t){c()&&(t.preventDefault(),e.saveRecord())}},"SAVE DEAD"))});r(67);function _e(){var e=Object(y.a)(["init"]);return _e=function(){return e},e}function Ue(){var e=Object(y.a)(["windowSize"]);return Ue=function(){return e},e}var Je=Object(E.connect)({windowSize:Object(w.state)(Ue()),init:Object(w.sequences)(_e())},function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e="landscape"===this.props.windowSize.orientation?"row":"column";return l.a.createElement("div",{className:"App",style:{flexDirection:e}},l.a.createElement(Le,null),l.a.createElement(Ve,null))}}]),t}(l.a.Component)),Ke=r(9),Qe=r(4),Xe=r(12),et=r.n(Xe),tt=function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),t}(Qe.CerebralError),rt=function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),t}(Qe.CerebralError),nt=function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),t}(Qe.CerebralError);function at(){var e=Object(y.a)(["",""]);return at=function(){return e},e}function ct(){var e=Object(y.a)(["trello.lists"]);return ct=function(){return e},e}function ot(){var e=Object(y.a)(["trello.lists.",""]);return ot=function(){return e},e}function ut(){var e=Object(y.a)(["trello.authorized"]);return ut=function(){return e},e}function it(){var e=Object(y.a)(["trello.authorized"]);return it=function(){return e},e}var st="name,id,closed,desc,dateLastActivity,labels,idList";et.a.config({warnings:{wForgottenReturn:!1}});var dt=[function(e){return e.trello.authorize().catch(function(e){throw e.message="Failed to authorize trello: "+e.message+JSON.stringify(e.stack),new nt(e)})},Object(Ke.a)(Object(Qe.state)(it()),!0)],lt=[Object(Ke.a)(Object(Qe.state)(ut()),!1),Object(Qe.sequence)("deauthorize->authorize",dt)],ft={boards:{},lists:{}},bt=Object(Qe.sequence)("trello.loadList",[function(e){var t=e.props,r=e.trello,n={};return et.a.try(function(){return ft.boards[t.boardName]?ft.boards[t.boardName]:ft.boards[t.boardName]=r.get("members/me/boards",{fields:"name,id,closed"}).filter(function(e){return e&&!e.closed}).then(function(e){var n=z.a.find(e,function(e){return e.name===t.boardName});return n||(console.log("Could not find board "+t.boardName+", creating it."),r.post("boards",{name:t.boardName}))})}).then(function(e){n.board=e}).then(function(){return r.get("boards/".concat(n.board.id,"/labels"),{fields:"id,name,color"})}).then(function(e){n.labels=e}).then(function(){return ft.lists[t.listName]?ft.lists[t.listName]:ft.lists[t.listName]=r.get("boards/".concat(n.board.id,"/lists"),{fields:"name,id,closed,cards"}).filter(function(e){return e&&!e.closed}).then(function(e){var a=z.a.find(e,function(e){return e.name===t.listName});return a||(console.log("Could not find list "+t.listName+", creating it."),r.post("boards/".concat(n.board.id,"/lists"),{name:t.listName}))})}).then(function(e){n.list=e}).then(function(){return n}).catch(function(e){throw e.message="Failed to get list "+t.listName+": "+e.message,new rt(e)})},function(e){var t=e.props;return e.trello.get("lists/"+t.list.id+"/cards",{fields:st}).filter(function(e){return e&&!e.closed}).then(function(e){return z.a.keyBy(z.a.map(e,function(e){return e.statePath="trello.lists.".concat(t.key,".").concat(e.id),e}),function(e){return e.id})}).then(function(e){return{cards:e}}).catch(function(e){throw e.message="Failed to get cards for list "+t.listName+": "+e.message,new rt(e)})},function(e){var t=e.props,r=e.store;e.get;r.set(Object(Qe.state)(ot(),t.key),{id:t.list.id,name:t.list.name,cards:t.cards,board:t.board,labels:t.labels})}]),mt=Object(Qe.sequence)("trello.reloadOneCard",[function(e){var t=e.trello,r=e.props,n=e.store,a=e.get;if(r.card&&r.card.id)return t.get("cards/".concat(r.card.id),{fields:st}).then(function(e){var t=a(Object(Qe.state)(ct())),r=z.a.find(t,function(t,r){return t.id===e.idList}),c="trello.lists.".concat(r.name.toLowerCase(),".cards.").concat(e.id);return e.statePath=c,n.set(Object(Qe.state)(at(),c),e),{card:e}})}]),gt=Object(Qe.sequence)("trello.putCard",[function(e){var t=e.trello,r=e.props;return et.a.try(function(){var e="cards/";return r.card.id?(e+=r.card.id+"/",t.put(e,{name:r.card.name,idList:r.card.idList})):t.post(e,{name:r.card.name,idList:r.card.idList})}).catch(function(e){throw new tt("Failed to save to card",e)})},mt]),vt=Object(Qe.sequence)("trello.addLabelToCard",[function(e){var t=e.trello,r=e.props;t.post("cards/".concat(r.card.id,"/idLabels"),{value:r.idLabel})},mt]);function pt(){var e=Object(y.a)(["treatments.treatmentCodes"]);return pt=function(){return e},e}function Ot(){var e=Object(y.a)(["treatments.colors"]);return Ot=function(){return e},e}function jt(){var e=Object(y.a)(["treatments.tagIndex"]);return jt=function(){return e},e}function ht(){var e=Object(y.a)(["treatments.records"]);return ht=function(){return e},e}function yt(){var e=Object(y.a)(["incoming.records"]);return yt=function(){return e},e}function Et(){var e=Object(y.a)(["treatments.records"]);return Et=function(){return e},e}function wt(){var e=Object(y.a)(["trello.lists.treatments.id"]);return wt=function(){return e},e}function Nt(){var e=Object(y.a)(["treatments.records"]);return Nt=function(){return e},e}var kt=[function(e){var t=e.props,r=(e.store,!1),n=(0,e.get)(Object(Qe.state)(Nt())),a=z.a.find(n,function(e){return e.date===t.record.date&&e.treatment===t.record.treatment});return a?z.a.find(a.tags,function(e){return t.record.tag.color===e.color&&t.record.tag.number===e.number})?{record:a}:((r=z.a.cloneDeep(a)).tags.push(t.record.tag),{record:r}):((r=z.a.cloneDeep(t.record)).tags=[r.tag],{record:r})},function(e){var t=e.props,r=(e.store,e.get);return{card:{id:t.record.id,idList:t.record.idList||r(Object(Qe.state)(wt())),name:t.record.date+": "+t.record.treatment+": "+z.a.join(z.a.map(t.record.tags,function(e){return e.color+e.number})," ")}}},gt],Ct=function(e){if(!e)return null;var t=e.name.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}):(.*)$/);if(!t||t.length<3)return null;var r=t[1].trim(),n=t[2].trim(),a=n.match(/^(.+):(.*)$/);if(!a||a.length<3)return null;var c=a[1].trim();return n=a[2].trim(),{date:r,treatment:c,tags:z.a.map(z.a.split(n," "),W),id:e.id,idList:e.idList,cardName:e.name,dateLastActivity:e.dateLastActivity}},Rt=Object(Qe.sequence)("treatments.fetch",[function(){return{boardName:"Livestock",listName:"Treatments",key:"treatments"}},bt,function(e){var t=e.props;return e.store.set(Object(Qe.state)(Et()),z.a.map(t.cards,Ct))},function(e){e.props;var t=e.get,r=e.store,n=t(Object(Qe.state)(yt())),a=t(Object(Qe.state)(ht())),c=z.a.reduce(a,function(e,t){return t.tags?(z.a.each(t.tags,function(r){var a=$(r),c=G(n,r,t.date);c||(c={groupname:"NONE"}),e[a]||(e[a]={}),e[a][c.groupname]||(e[a][c.groupname]={group:c,treatments:[]}),e[a][c.groupname].treatments.push({date:t.date,treatment:t.treatment})}),e):e},{});r.set(Object(Qe.state)(jt()),c)}]),St=Object(Qe.sequence)("treatments.fetchConfig",[function(){return{boardName:"Livestock",listName:"Config",key:"livestockConfig"}},bt,Object(Qe.sequence)("saveColors",[function(e){var t=e.props;return e.store.set(Object(Qe.state)(Ot()),function(e){return e?JSON.parse(e.desc):null}(z.a.find(t.cards,function(e){return"Tag Colors"===e.name})))}]),Object(Qe.sequence)("saveCodes",[function(e){var t=e.props;return e.store.set(Object(Qe.state)(pt()),function(e){return e?JSON.parse(e.desc):null}(z.a.find(t.cards,function(e){return"Treatment Types"===e.name})))}])]),Dt={sequences:c,state:{treatmentCodes:[{code:"Z",name:"Zuprevo"},{code:"Za",name:"Zactran"},{code:"Dr",name:"Draxxin"},{code:"N",name:"Nuflor"},{code:"No",name:"Noromycin"},{code:"P",name:"Pennicillin"},{code:"Px",name:"Polyflex"},{code:"By",name:"Baytril"},{code:"Ex",name:"Excenel"},{code:"S",name:"Sulfa"},{code:"D",name:"Dex"},{code:"E",name:"Electrolytes"},{code:"Ht",name:"High Temp"},{code:"Lt",name:"Low Temp"},{code:"Nt",name:"No Temp"}],colors:{ORANGE:"#FF9900",YELLOW:"#E9E602",MARTYELL:"#FF00FF",BLACK:"#000000",RED:"#FF0000",WHITE:"#FFFFFF"},records:[]}},Tt=r(31);function Lt(){var e=Object(y.a)(["incoming.records.",".dead"]);return Lt=function(){return e},e}function Yt(){var e=Object(y.a)(["incoming.records"]);return Yt=function(){return e},e}function qt(){var e=Object(y.a)(["dead.records"]);return qt=function(){return e},e}function xt(){var e=Object(y.a)(["incoming.records"]);return xt=function(){return e},e}var At=function(e){if(!e)return null;var t=e.name.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}):? *([^;]+);(.*)$/),r={};r.date=t[1],r.groupname=t[2];var n=t[3].split(";");return z.a.each(n,function(e){var t=e.trim().split(":"),n=Object(Tt.a)(t,2),a=n[0],c=n[1];r[a.toLowerCase().trim()]=c.trim()}),r.tags&&(r.tags=r.tags.replace(/ /g,""),r.tag_ranges=z.a.reduce(r.tags.split(","),function(e,t){var r=z.a.map(t.split("-"),W),n=Object(Tt.a)(r,2),a=n[0],c=n[1];return a.color!==c.color?(e.push({start:a,end:{color:a.color,number:1e3}}),e.push({start:{color:c.color,number:1},end:c}),e):(e.push({start:a,end:c}),e)},[])),r.id=e.id,r.idList=e.idList,r.cardName=e.name,r.dateLastActivity=e.dateLastActivity,r},zt=Object(Qe.sequence)("incoming.fetch",[function(){return{boardName:"Livestock",listName:"Incoming",key:"incoming"}},bt,function(e){var t=e.props;return e.store.set(Object(Qe.state)(xt()),z.a.map(t.cards,At))}]),Bt=Object(Qe.sequence)("incoming.computeStats",[function(e){var t=e.get,r=e.store,n=t(Object(Qe.state)(qt())),a=t(Object(Qe.state)(Yt())),c=z.a.reduce(n,function(e,t){return t.tags||console.log("incoming.computeStats: WARNING: dead record has no tags.  Card name = ",t.cardName),z.a.each(t.tags,function(r){var n=G(a,r,t.date);n&&(e[n.groupname]||(e[n.groupname]=[]),e[n.groupname].push({date:t.date,tag:r}))}),e},{});z.a.each(a,function(e,t){r.set(Object(Qe.state)(Lt(),t),c[e.groupname]||[])})}]),Mt={sequences:o,state:{records:[]}};function Ft(){var e=Object(y.a)(["trello.lists.dead.id"]);return Ft=function(){return e},e}function It(){var e=Object(y.a)(["dead.records"]);return It=function(){return e},e}function Gt(){var e=Object(y.a)(["dead.records"]);return Gt=function(){return e},e}function Wt(){var e=Object(y.a)(["dead.tagIndex.",""]);return Wt=function(){return e},e}function $t(){var e=Object(y.a)(["dead.tagIndex.",""]);return $t=function(){return e},e}function Pt(){var e=Object(y.a)(["incoming"]);return Pt=function(){return e},e}function Zt(){var e=Object(y.a)(["dead.records"]);return Zt=function(){return e},e}function Ht(){var e=Object(y.a)(["dead.records.",""]);return Ht=function(){return e},e}function Vt(){var e=Object(y.a)(["dead.records"]);return Vt=function(){return e},e}function _t(){var e=Object(y.a)(["dead.tagIndex"]);return _t=function(){return e},e}function Ut(){var e=Object(y.a)(["incoming.records"]);return Ut=function(){return e},e}function Jt(){var e=Object(y.a)(["dead.errors"]);return Jt=function(){return e},e}function Kt(){var e=Object(y.a)(["dead.records"]);return Kt=function(){return e},e}var Qt=function(e){try{if(!e)return null;var t=e.name.match(/^([0-9]{4}-[0-9]{1,2}-[0-9]{1,2}):?(.*)$/),r=t[1],n=t[2];t=n.match(/[Nn][Oo][Tt][Ee]:(.*)$/);var a=!1;t&&(a=t[1]);var c=(n=n.replace(/\(.*\)/g,"")).match(/(([A-Z]+:[A-Z]{3}[0-9]{2}-[A-Z0-9]:)?[A-Za-z']+ ?([0-9]+)?)/g);c=z.a.map(c,function(e){return e.trim()}),c=z.a.map(c,function(e){return"NT"===e?"NOTAG1":e});var o=z.a.filter(c,function(e){return!e.match(/^[NSB][0-9S]{1,2}$/i)&&!e.match(/^OB[SN]?[NS]?$/)&&!e.match(/^HB$/i)&&!e.match(/^HEIFER$/i)&&!e.match(/^DRY( ?(LOT|COW))?$/i)&&!e.match(/^DAIRY$/i)&&!e.match(/^APRIL'?S?$/i)&&!e.match(/^WOODS$/i)&&!e.match(/^BARN ?[1-3]$/i)&&!e.match(/^dead/i)&&!e.match(/^total/i)&&!e.match(/^and/i)});return o=z.a.map(o,function(e){return e.toUpperCase().replace(/ /g,"")}),o=z.a.map(o,function(e){return"NOTAG"===e?"NOTAG1":e}),{date:r,tags:o=z.a.map(o,W),note:a,id:e.id,idList:e.idList,cardName:e.name,dateLastActivity:e.dateLastActivity}}catch(u){return{cardName:e.name,idList:e.idList,id:e.id,error:u.toString()}}},Xt=Object(Qe.sequence)("dead.fetch",[function(){return{boardName:"Livestock",listName:"Dead",key:"dead"}},bt,function(e){var t=e.props,r=e.store,n=e.get,a=z.a.reduce(t.cards,function(e,t){var r=Qt(z.a.cloneDeep(t));return r.error?e.errors.push(r):e.records.push(r),e},{errors:[],records:[]}),c=a.errors,o=a.records;r.set(Object(Qe.state)(Kt()),o),r.set(Object(Qe.state)(Jt()),c);var u=n(Object(Qe.state)(Ut())),i=z.a.reduce(o,function(e,t){return t.tags?(z.a.each(t.tags,function(r){var n=$(r),a=G(u,r,t.date);a||(a={groupname:"NONE"}),e[n]||(e[n]={}),e[n][a.groupname]=t.date}),e):e},{});r.set(Object(Qe.state)(_t()),i)}]),er=Object(Qe.sequence)("dead.reloadOneRecord",[function(e){var t=e.props,r=e.store,n=e.get,a=n(Object(Qe.state)(Vt())),c=z.a.findIndex(a,function(e){return e.id===t.card.id}),o=Qt(t.card);c>=0?r.set(Object(Qe.state)(Ht(),c),o):r.push(Object(Qe.state)(Zt()),o);var u=n(Object(Qe.state)(Pt()));return z.a.each(o.tags,function(e){var t=$(e),a=G(u,e,o.date);a||(a={groupname:"NONE"});var c=z.a.clone(n(Object(Qe.state)($t(),t))),i=z.a.clone(c)||{};i[a.groupname]=o.date,r.set(Object(Qe.state)(Wt(),t),i)}),{record:o}}]),tr=Object(Qe.sequence)("dead.saveDead",[function(e){var t=e.props,r=(e.store,(0,e.get)(Object(Qe.state)(Gt()))),n=M()(t.record.date,"YYYY-MM-DD").subtract(14,"days"),a=M()(t.record.date,"YYYY-MM-DD").add(14,"days");if(z.a.find(r,function(e){var r=M()(e.date,"YYYY-MM-DD");return!(!n.isBefore(r)||!a.isAfter(r))&&!!z.a.find(e.tags,function(e){return e.color===t.record.tag.color&&e.number===t.record.tag.number})}))return{alreadyDead:!0}},function(e){var t=e.props,r=(e.store,e.get);if(!t.alreadyDead){var n=!1,a=r(Object(Qe.state)(It())),c=z.a.find(a,function(e){return e.date===t.record.date});return c?((n=z.a.cloneDeep(c)).tags.push(t.record.tag),{record:n}):((n=z.a.cloneDeep(t.record)).tags=[n.tag],{record:n})}},function(e){var t=e.props,r=(e.store,e.get),n=t.record.card||{};return n.id=t.record.id,n.idList=t.record.idList||r(Object(Qe.state)(Ft())),n.name=t.record.date+": "+z.a.join(z.a.map(t.record.tags,$)," ")+(t.record.note?"Note: "+t.record.note:""),{card:n}},gt,er]),rr={sequences:u,state:{tagIndex:{},records:[]}},nr={sequences:a,state:{authorized:!1,lists:{}}};function ar(){var e=Object(y.a)(["windowSize.isSmall"]);return ar=function(){return e},e}function cr(){var e=Object(y.a)(["windowSize.isSmall"]);return cr=function(){return e},e}function or(){var e=Object(y.a)(["windowSize.orientation"]);return or=function(){return e},e}function ur(){var e=Object(y.a)(["windowSize.orientation"]);return ur=function(){return e},e}var ir=Object(Qe.sequence)("windowSize.resized",[function(e){var t=e.windowSize,r=e.props,n=e.store,a=e.get;a(Object(Qe.state)(ur()))!==t.orientation()&&n.set(Object(Qe.state)(or()),t.orientation());var c="portrait"===t.orientation()?r.width<767:r.height<500;a(Object(Qe.state)(cr()))!==c&&n.set(Object(Qe.state)(ar()),c)}]),sr=Object(Qe.sequence)("windowSize.init",[function(e){return e.windowSize.init("windowSize.resized")},ir]),dr={sequences:i,state:{isSmall:!0,orientation:"portrait"}},lr=function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(h.a)(t,e),t}(Qe.CerebralError),fr=Object(Qe.Provider)({authorize:function(){return et.a.try(function(){var e=0;return et.a.try(function t(){if(window.Trello)return!0;if(e++>50)throw lr("Could not load Trello client library");return et.a.delay(250).then(t)})}).then(function(){return new et.a(function(e,t){return window.Trello.authorize({type:"redirect",name:"Ault Farms - Invoices",persist:!0,scope:{read:"true",write:"true"},expiration:"never",success:e,error:function(e){console.log("Failed to authorize Trello: err = ",e),t(e)}}),null})})},deauthorize:function(){return new et.a(function(e,t){window.Trello.deauthorize(),e()})},get:function(e,t){return new et.a(function(r,n){return window.Trello.get(e,t||{},r,function(e){console.log("Trello.get ERROR: ",e),n(e)})})},put:function(e,t){return new et.a(function(r,n){return window.Trello.put(e,t,r,function(e){console.log("Trello.put ERROR: ",e),n(e)})})},post:function(e,t){return new et.a(function(r,n){return window.Trello.post(e,t,r,function(e){console.log("Trello.post ERROR: ",e),n(e)})})}});function br(){var e=Object(y.a)(["",""]);return br=function(){return e},e}function mr(){var e=Object(y.a)(["",""]);return mr=function(){return e},e}var gr=function(){return{width:window.innerWidth,height:window.innerHeight}},vr="",pr={dimensions:function(){return gr()},orientation:function(){var e=gr();return e.width>e.height?"landscape":"portrait"},windowResized:function(){this.context.get(Object(Qe.sequences)(mr(),vr))(gr())},init:function(e){vr=e,window.addEventListener("resize",pr.windowResized.bind(this)),this.context.get(Object(Qe.sequences)(br(),e))(gr())}},Or=pr;function jr(){var e=Object(y.a)(["msg"]);return jr=function(){return e},e}function hr(){var e=Object(y.a)(["recordsValid"]);return hr=function(){return e},e}function yr(){var e=Object(y.a)(["msg"]);return yr=function(){return e},e}function Er(){var e=Object(y.a)(["msg"]);return Er=function(){return e},e}function wr(){var e=Object(y.a)(["msg"]);return wr=function(){return e},e}function Nr(){var e=Object(y.a)(["msg"]);return Nr=function(){return e},e}function kr(){var e=Object(y.a)(["historySelector.active"]);return kr=function(){return e},e}function Cr(){var e=Object(y.a)(["record.tag.number"]);return Cr=function(){return e},e}function Rr(){var e=Object(y.a)(["record.is_saved"]);return Rr=function(){return e},e}function Sr(){var e=Object(y.a)(["recordsValid"]);return Sr=function(){return e},e}function Dr(){var e=Object(y.a)(["msg"]);return Dr=function(){return e},e}function Tr(){var e=Object(y.a)(["msg"]);return Tr=function(){return e},e}function Lr(){var e=Object(y.a)(["recordsValid"]);return Lr=function(){return e},e}function Yr(){var e=Object(y.a)(["record"]);return Yr=function(){return e},e}function qr(){var e=Object(y.a)(["record"]);return qr=function(){return e},e}function xr(){var e=Object(y.a)(["record.is_saved"]);return xr=function(){return e},e}function Ar(){var e=Object(y.a)(["record.group"]);return Ar=function(){return e},e}function zr(){var e=Object(y.a)(["record.group"]);return zr=function(){return e},e}function Br(){var e=Object(y.a)(["record.date"]);return Br=function(){return e},e}function Mr(){var e=Object(y.a)(["record.tag"]);return Mr=function(){return e},e}function Fr(){var e=Object(y.a)(["incoming.records"]);return Fr=function(){return e},e}function Ir(){var e=Object(y.a)(["record.tag.number"]);return Ir=function(){return e},e}function Gr(){var e=Object(y.a)(["record.tag.number"]);return Gr=function(){return e},e}function Wr(){var e=Object(y.a)(["record.tag.color"]);return Wr=function(){return e},e}function $r(){var e=Object(y.a)(["record.date"]);return $r=function(){return e},e}function Pr(){var e=Object(y.a)(["historySelector.active"]);return Pr=function(){return e},e}function Zr(){var e=Object(y.a)(["record.is_saved"]);return Zr=function(){return e},e}function Hr(){var e=Object(y.a)(["sort"]);return Hr=function(){return e},e}function Vr(){var e=Object(y.a)(["historyGroup.sort"]);return Vr=function(){return e},e}function _r(){var e=Object(y.a)(["active"]);return _r=function(){return e},e}function Ur(){var e=Object(y.a)(["historySelector.active"]);return Ur=function(){return e},e}function Jr(){var e=Object(y.a)(["msg"]);return Jr=function(){return e},e}function Kr(){var e=Object(y.a)(["msg"]);return Kr=function(){return e},e}function Qr(){var e=Object(y.a)(["record.is_saved"]);return Qr=function(){return e},e}function Xr(){var e=Object(y.a)(["msg"]);return Xr=function(){return e},e}function en(){var e=Object(y.a)(["trello.authorized"]);return en=function(){return e},e}function tn(){var e=Object(y.a)(["msg"]);return tn=function(){return e},e}var rn=Object(Qe.sequence)("updateMsg",[function(e){var t=e.props,r=e.store,n=e.get;return t.msg?r.set(Object(w.state)(tn()),t.msg):n(Object(w.state)(en()))?n(Object(w.state)(Qr()))?r.set(Object(w.state)(Kr()),{type:"good",text:"Dead record saved."}):void r.set(Object(w.state)(Jr()),{type:"bad",text:"Dead record not saved"}):r.set(Object(w.state)(Xr()),{type:"bad",text:"You are not logged in to Trello."})}]),nn=Object(Qe.sequence)("app.historySelectionChangeRequested",[Object(Ke.a)(Object(w.state)(Ur()),Object(w.props)(_r()))]),an=Object(Qe.sequence)("app.historyGroupSortClicked",[Object(Ke.a)(Object(w.state)(Vr()),Object(w.props)(Hr()))]),cn=Object(Qe.sequence)("app.changeRecord",[function(e){var t=e.props,r=e.store,a=e.get;if(a(Object(w.state)(Zr()))&&t.tag&&r.set(Object(w.state)(Pr()),"tag"),t.date&&r.set(Object(w.state)($r()),t.date),t.tag&&"string"===typeof t.tag.color&&(r.set(Object(w.state)(Wr()),t.tag.color),"NOTAG"===t.tag.color&&r.set(Object(w.state)(Gr()),"1")),!t.tag||"string"!==typeof t.tag.number&&"number"!==typeof t.tag.number||r.set(Object(w.state)(Ir()),+t.tag.number),t.tag){var c=n.groupForTag(a(Object(w.state)(Fr())),a(Object(w.state)(Mr())),a(Object(w.state)(Br()))),o=a(Object(w.state)(zr()));o&&c&&o.groupname===c.groupname||r.set(Object(w.state)(Ar()),k.a.cloneDeep(c))}t.tag&&r.set(Object(w.state)(xr()),!1)},rn]),on=Object(Qe.sequence)("app.logout",[lt,dt]),un=Object(Qe.sequence)("app.saveRecord",[Object(Ke.a)(Object(w.props)(qr()),Object(w.state)(Yr())),Object(Ke.a)(Object(w.state)(Lr()),!1),Object(Ke.a)(Object(w.state)(Tr()),{type:"good",text:"Saving card..."}),tr,Object(Ke.a)(Object(w.state)(Dr()),{type:"good",text:"Refreshing records..."}),Object(Ke.a)(Object(w.state)(Sr()),!0),Object(Ke.a)(Object(w.state)(Rr()),!0),Object(Ke.a)(Object(w.state)(Cr()),""),Object(Ke.a)(Object(w.state)(kr()),"date"),Object(Ke.a)(Object(w.state)(Nr()),{type:"good",text:"Recomputing stats..."}),Bt,rn]),sn=Object(Qe.sequence)("app.init",[sr,Object(Ke.a)(Object(w.state)(wr()),{type:"good",text:"Checking trello authorization..."}),dt,Object(Ke.a)(Object(w.state)(Er()),{type:"good",text:"Fetching records..."}),zt,Object(Qe.parallel)("app.init.parallel",[Rt,St,Xt]),Object(Ke.a)(Object(w.state)(yr()),{type:"good",text:"Computing stats..."}),Bt,Object(Ke.a)(Object(w.state)(hr()),!0),Object(Ke.a)(Object(w.state)(jr()),{type:"good",text:"Loaded successfully."})]);function dn(){var e=Object(y.a)(["msg"]);return dn=function(){return e},e}function ln(){var e=Object(y.a)(["msg"]);return ln=function(){return e},e}function fn(){var e=Object(y.a)(["msg"]);return fn=function(){return e},e}var bn={sequences:s,state:{recordsValid:!1,treatmentEditorActive:!1,historySelector:{active:"date"},historyGroup:{sort:"date"},msg:{type:"bad",text:"Treatment record not saved."},record:{group:{},date:x()().format("YYYY-MM-DD"),tag:{color:"",number:0},is_saved:!0}},modules:{treatments:Dt,incoming:Mt,dead:rr,trello:nr,windowSize:dr},providers:{trello:fr,windowSize:Or},catch:[[tt,[Object(Ke.a)(Object(w.state)(fn()),"ERROR: failed to save in Trello")]],[rt,[Object(Ke.a)(Object(w.state)(ln()),"ERROR: failed to get in Trello")]],[nt,[Object(Ke.a)(Object(w.state)(dn()),"ERROR: failed to authorize in Trello")]]]},mn=(r(81),r(70),r(79),Object(Qe.default)(bn,{devtools:null}));b.a.render(l.a.createElement(E.Container,{app:mn},l.a.createElement(Je,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/dead",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/dead","/service-worker.js");m?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):g(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):g(e)})}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.6a8b1b0f.chunk.js.map